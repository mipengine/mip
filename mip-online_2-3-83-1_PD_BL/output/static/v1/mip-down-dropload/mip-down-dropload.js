define("mip-down-dropload/mip-down-dropload",["require","zepto","viewport","util","customElement"],function(t){function e(t,e){if(++a.nowPage,e.isPlat)a.ajaxUrl=e.url+"&page="+a.nowPage+"&platform="+a.isPlat;else a.ajaxUrl=e.url+"&page="+a.nowPage;i.ajax({type:"GET",url:a.ajaxUrl,dataType:"json",success:function(e){var n="";if(a.totalPage=e.totalPage,a.nowPage=e.page,"android"===a.isPlat)a.Page1=a.nowPage,a.allPage1=a.totalPage;if("iphone"===a.isPlat)a.Page2=a.nowPage,a.allPage2=a.totalPage;if(a.nowPage>=e.totalPage)i(t).find(".button-footer").remove();if(0!==parseInt(a.totalPage,10)){for(var r in e.list)n+='<li><a href="http://m.pc6.com/s/'+e.list[r].ID+'" class="img" target="_blank"><mip-img src="'+e.list[r].thumb+'" width="60" height="60"></mip-img></a><p><a href="http://m.pc6.com/s/'+e.list[r].ID+'" target="_blank">'+e.list[r].ResName+'</a><em class="lstar'+e.list[r].ResRank+'"></em><span>'+e.list[r].CatalogName+"<u>"+e.list[r].ResSize+"</u>"+e.list[r].ResVer+'</span></p><a href="http://m.pc6.com/s/'+e.list[r].ID+'" class="btn" target="_blank"><em class="bg"></em>下载</a></li>';i(t).find("ul").eq(a.nowEq).append(n)}}})}var i=t("zepto"),n=t("viewport"),r=t("util"),o=r.platform,s=t("customElement").create(),a={Page1:1,Page2:1,allPage1:0,allPage2:0,nowPage:1,totalPage:0,isPlat:"",ajaxUrl:"",nowEq:0};return s.prototype.build=function(){function t(){i(r).find(".vd-tabs-hd").eq(a.nowEq).addClass("mip-vd-tabs-nav-selected").siblings().removeClass("mip-vd-tabs-nav-selected"),i(r).find(".vd-tabs-bd").eq(a.nowEq).show().siblings(".vd-tabs-bd").hide()}var r=this.element,s=JSON.parse(i(r).attr("mip-dropload-params").replace(/'/g,'"'));if(o.isIos()&&s.isPlat)a.isPlat="iphone",a.nowEq=1;if(o.isAndroid()&&s.isPlat)a.isPlat="android",a.nowEq=0;if(t(),i(r).find(".vd-tabs-hd").click(function(){if(a.nowEq=i(this).index(),a.isPlat=i(this).attr("data-sysName"),0===a.nowEq)a.nowPage=a.Page1,a.totalPage=a.allPage1;else a.nowPage=a.Page2,a.totalPage=a.allPage2;t()}),i(r).find(".getMore").on("click",function(){e(r,s)}),s.isclick)n.on("scroll",function(t){if(n.getScrollTop()+n.getHeight()>=n.getScrollHeight())if(a.nowPage===a.totalPage)return;else e(r,s)})},s}),define("mip-down-dropload",["mip-down-dropload/mip-down-dropload"],function(t){return t}),function(){function t(t,e){t.registerMipElement("mip-down-dropload",e)}if(window.MIP)require(["mip-down-dropload"],function(e){t(window.MIP,e)});else require(["mip","mip-down-dropload"],t)}();