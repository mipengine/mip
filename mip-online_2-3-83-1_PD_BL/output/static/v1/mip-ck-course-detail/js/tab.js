define("mip-ck-course-detail/js/tab",["require","zepto","./mediator","util"],function(t){function e(){var t=p.scrollTop(),e=r.offset().top;return t>e}function i(){n=c("#details-tab"),r=n.closest(".detail-tab-controls-wrap"),o=n.find(".tab-control"),s=c(".swiper-container"),a=s.find(".swiper-slide"),l=o.size(),n.on("click",".tab-control",function(t){var e=c(this),i=o.index(this),n=a.eq(i);if(i!==f)o.removeClass("cur"),e.addClass("cur"),a.removeClass("cur"),n.addClass("cur"),f=i,u.trigger("tab-switched",i)});var t=new h(s.get(0));t.on("swipeleft swiperight",function(t,e){var i=f;if("swiperight"===e.type)i=Math.max(0,i-1);else i=Math.min(l,i+1);u.trigger("tab-switch",i)}),c("#course_comments").on("click",function(t){u.trigger("tab-switch",2)}),c("#course_details").on("click",function(t){u.trigger("tab-switch",1)}),u.on("tab-switch",function(t,e){if(e!==f)o.eq(e).trigger("click")}),u.on("window-scroll",function(){var t="removeClass";if(e())t="addClass";n[t]("fixed-details-tab")})}var n,r,o,s,a,l,c=t("zepto"),u=t("./mediator"),d=t("util"),h=d.Gesture,p=c(window),f=0;return i});