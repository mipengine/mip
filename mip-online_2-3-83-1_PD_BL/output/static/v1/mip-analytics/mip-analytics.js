define("mip-analytics/mip-analytics",["require","customElement","util","performance"],function(e){var t=e("customElement").create(),i=e("util"),n=e("performance"),o={};t.prototype.build=function(){try{var e=this.element.querySelector('script[type="application/json"]'),t=this.cfg=JSON.parse(e.textContent.toString())}catch(e){return console.warn("json is illegal"),void console.warn(e)}if(t.setting&&t.hosts)for(var i in t.setting)if(t.setting.hasOwnProperty(i)){var n=t.setting[i];n.forEach(function(e,i){e.host=t.hosts[e.host]}),u[i]&&u[i].call(this,n)}};var a={isObject:function(e){return"object"==typeof e},serialize:function(e,t){if(!e)return"";var i="",n="";if(this.isObject(e)){for(var o in e)if(e.hasOwnProperty(o)){if(n=e[o],"undefined"==typeof n)continue;if(this.isObject(n))n=JSON.stringify(n);i+=o+"="+encodeURIComponent(this.valReplace(n,t))+"&"}i=i.substring(0,i.length-1)}else if(this.isString(e))i=e;return i},imgSendLog:function(e){var t="IMAGE"+(new Date).getTime(),i=window[t]=new Image;i.onload=function(){i.onload=i.onerror=i.onabort=null,window[t]=null,i=null},i.src=e},valReplace:function(e,t){return t=t||{},i.fn.extend(t,o),e.replace(/(\${.*})/g,function(e,i){var n=i.substring(2,i.length-1).trim();if("object"==typeof t[n])return"";else return t[n]||i})},send:function(e){var t=this.serialize(e.queryString,e.vars)+"&t="+(new Date).getTime(),i=this.valReplace(e.host,e.vars)+t;this.imgSendLog(i)}},r=function(e,t){e.forEach(function(e,n){i.event.delegate(document,e.selector,t,function(t){a.send(e)},!1)})},d=[],c=["MIPStart","MIPPageShow","MIPDomContentLoaded","MIPFirstScreen"],l="domready",s={};s[l]=0;var p=function(e){return e?c.every(function(t,i){return e[t]}):!1},u={click:function(e){r(e,"click")},touchend:function(e){r(e,"touchend")},disp:function(e){n.on("update",function(t){if(!s[l]&&p(t))o=t,1===s[l],e.forEach(function(e,t){a.send(e)})})},scroll:function(){},timer:function(e){e.forEach(function(e,t){d.push(setInterval(function(){a.send(e)},e.option.interval||4e3))})}};return t.prototype.detachedCallback=function(){d.forEach(function(e,t){clearInterval(e)})},t}),define("mip-analytics",["mip-analytics/mip-analytics"],function(e){return e}),function(){function e(e,t){e.registerMipElement("mip-analytics",t)}if(window.MIP)require(["mip-analytics"],function(t){e(window.MIP,t)});else require(["mip","mip-analytics"],e)}();