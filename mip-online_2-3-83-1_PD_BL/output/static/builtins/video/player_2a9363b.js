!function(o,n){function e(o,n){return d.cleanObj.toString.call(o).slice(8,-1)===n}function t(o){var n=l[o];if(n)return n.exports;throw"module "+o+" is undefined"}function i(o,n){for(var e,i,r=o.split(":"),a=r.pop().split("/"),s=d;e=a.shift();)"bdbox"!==e&&(i=e,a.length&&(s=s[e]=s[e]||{}));var c=l[o]={exports:{}},u=d.isFunction(n)?n.apply(c,[t,c.exports,c,d]):n;u&&(c.exports=u),s[i]=c.exports}function r(){m.forEach(function(o){o()}),m.length=0,v=!0}function a(o){var n;return null==o?n=String(o):(n=Object.prototype.toString.call(o).toLowerCase(),n=n.substring(8,n.length-1)),n}function s(n){var e=n.success||g,t={imageUrl:"",mediaType:"all",title:"",content:"",linkUrl:location.href},i=n.error||g;return d.isFunction(n.success)&&(e="_xSHARE_SUCCESS_"+d.getId(),o[e]=n.success,t.success=e),d.isFunction(n.error)&&(i="_xSHARE_FAIL_"+d.getId(),o[i]=n.error,t.error=i),d.each(n,function(o,e){"success"!==e&&"error"!==e&&(e in b?e=b[e]:"content"!==e||n.title||(t.title=o),t[e]=o)}),d.isArray(t.mediaType)&&(t.mediaType="all"),o.BoxShareData||(o.BoxShareData={successcallback:e,errorcallback:i,options:t}),t}var c=+new Date,u=(c+"").slice(-3),p=navigator.userAgent,d={isBox:/ baiduboxapp\//i.test(p),isIOS:/(iPhone|iPod|iPad)/.test(p),isAndroid:/(Android);?[\s\/]+([\d.]+)?/.test(p),getId:function(){return u++},emptyArr:[],emptyFn:function(){},cleanObj:{},byId:function(o){return d.isString(o)?n.getElementById(o):o},toArray:function(o){return d.emptyArr.slice.call(o)},$:function(o,e){return e=e&&1===e.nodeType?e:n,d.toArray(e.querySelectorAll(o))}};"Function,String,Array,Number,RegExp".replace(/[^, ]+/g,function(o){d["is"+o]=function(n){return e(n,o)}}),d.isBoolean=function(o){return o===!0||o===!1},d.isObject=function(o){return"object"==typeof o},d.isUndefined=function(o){return void 0===o},d.isWindow=function(o){return null!=o&&o==o.window},d.isPlainObject=function(o){return d.isObject(o)&&!d.isWindow(o)&&Object.getPrototypeOf(o)==Object.prototype};var l={};d.define=i;var f=function(o,n,e){for(var t,i,r=o.split("."),a=e||f;t=r.shift();)"Box"!==t&&(i=t,r.length&&(a=a[t]=a[t]||{}));return a[i]=n||{},a[i]},m=[],v=!1;if(f.init=function(o){return"function"!=typeof o?this:(v?o():m.push(o),this)},"complete,loaded,interactive".indexOf(n.readyState)>-1&&n.body?r():n.addEventListener("DOMContentLoaded",r,!1),i("common:bdbox/utils/getVersion",function(n,e,t){var i=function(){var n=0;if(o.baiduboxapp_version)n=o.baiduboxapp_version;else{var e,t=navigator.userAgent;(e=/([\d+.]+)_(?:diordna|enohpi)_/.exec(t))?(e=e[1].split("."),n=e.reverse().join(".")):(e=/baiduboxapp\/([\d+.]+)/.exec(t))&&(n=e[1])}return i=function(){return n},n};t.exports=i}),i("common:bdbox/utils/version_compare",function(o,n,e){var t=function(o,n){n+="",o+="";for(var e=o.split("."),t=n.split("."),i=0,r=Math.max(e.length,t.length);r>i;i++){if(e[i]&&!t[i]&&parseInt(e[i])>0||parseInt(e[i])>parseInt(t[i]))return 1;if(t[i]&&!e[i]&&parseInt(t[i])>0||parseInt(e[i])<parseInt(t[i]))return-1}return 0};e.exports=t}),i("common:bdbox/ios/invokeApp",function(e,t,i,r){i.exports=function(e,t,i){if(e&&r.isBox){var a=[];if(r.isFunction(t))i=t;else for(var s in t)a.push(s+"="+t[s]);if(r.isFunction(i)){var c="_bdbox_js_"+r.getId();o[c]=function(){i.apply(o,[].slice.call(arguments,0))},a.push("func="+c)}else i&&a.push("func="+i);a="baiduboxapp://"+e+"?"+a.join("&");var u="_bdbox_ios_jsbridge",p=n.getElementById(u);p?p.src=a:(p=n.createElement("iframe"),p.style.display="none",p.id=u,p.src=a,(n.body||n.getElementsByTagName("body")[0]).appendChild(p))}}}),i("common:bdbox/android/invokeApp",function(n,e,t,i){function r(n,e,t){if(t&&!i.isArray(t)&&(t=Array.prototype.slice.call(arguments,0).slice(2)),o[n]&&o[n][e]){var r=o[n][e].apply(o[n],t);return{error:0,result:r,__from:"js"}}var u=c();if(s(u,4.8)>=0){var p=a(n,e,t);return p=p?JSON.parse(p):{},p.__from="app",p}if("4.7.1"===u||"4.7"==u){var d=a(n,e,t);return{error:0,result:d,__from:"app4.7"}}return{error:200}}function a(n,e,t){if(!i.isBox)return{error:201};if(!i.isAndroid)return{error:202};var r={obj:n,func:e,args:t?t:[]};try{return o.prompt("BdboxApp:"+JSON.stringify(r))}catch(a){return{error:201}}}var s=n("common:bdbox/utils/version_compare"),c=n("common:bdbox/utils/getVersion");t.exports=r}),i("common:bdbox/utils/detect",function(n,e,t,i){function r(n){var e={name:"unknown",version:0};this===o||this.os||(this.os=e),n=n||navigator.userAgent;var t={Weibo:/weibo/i,Wechat:/micromessenger\//i,QQ:/QQ\//};for(var i in t)t.hasOwnProperty(i)&&(e["is"+i]=t[i].test(n));e.isUC=n.match(/UC/)||o.ucweb||o.ucbrowser;var r=n.match(/(Android);?\s+([\d.]+)?/);if(r)return e.android=!0,e.version=r[2],e.name="android",e;var a=n.match(/(iPad).*OS\s([\d_]+)/),s=n.match(/(iPod)(.*OS\s([\d_]+))?/),c=!a&&n.match(/(iPhone\sOS)\s([\d_]+)/);return c&&!s?(e.ios=e.iphone=!0,e.version=c[2].replace(/_/g,"."),e.name="ios",e):a?(e.ios=e.ipad=!0,e.name="ios",e.version=a[2].replace(/_/g,"."),e):s?(e.name="ios",e.ios=e.ipod=!0,e.version=s[3]?s[3].replace(/_/g,"."):null,e):e}r.apply(i),t.exports=r}),i("common:bdbox/each",function(o,n,e){function t(o){var n;return null==o?n=String(o):(n=Object.prototype.toString.call(o).toLowerCase(),n=n.substring(8,n.length-1)),n}e.exports=function(o,n,e){if("object"==typeof o){var i,r,a=t(o);if(e=e||o,"array"===a||"arguments"===a||"nodelist"===a){for(i=0,r=o.length;r>i;i++)if(n.call(e,o[i],i,o)===!1)return}else for(i in o)if(o.hasOwnProperty(i)&&n.call(e,o[i],i,o)===!1)return}}}),i("common:bdbox/client/nativeShare",function(e,t,i,r){function a(n){var e={wechatIcon:location.protocol+"//m.baidu.com/static/search/logo300.png",type:"url",mediaType:"all",linkUrl:location.href,title:c.title,success:"console.log",error:"console.log"};each(n||{},function(o,n){e[n]=o}),e.image&&(e.imageUrl=e.image),e.iconUrl&&!e.imageUrl&&"url"===e.type&&(e.imageUrl=e.iconUrl);var t={};["success","error"].forEach(function(n){var i=n;r.isFunction(e[n])&&(i="_xSHARE_SUCCESS_"+r.getId(),o[i]=e[n]),t[n+"callback"]=i,delete e[n]}),t.options=e,t.options.imageUrl&&r.isAndroid&&s(r.version,"6.5")<0&&delete t.options.imageUrl,o.BoxShareData=t;var i=e.wechatIcon;if(/micromessenger\//i.test(navigator.userAgent)&&i&&i.length>20){var a=c.createElement("div");a.id="wa-generalevent-wx-logo",a.style.display="none",a.innerHTML='<img src="'+i+'"/>';var u=c.body.firstChild;u?c.body.insertBefore(a,u):c.body.appendChild(a)}}var s=e("common:bdbox/utils/version_compare"),c=n;i.exports=a}),i("common:bdbox/utils/ready",function(o,e,t){function i(){a.forEach(function(o){o()}),a.length=0,s=!0}function r(o){"function"==typeof o&&(s?o():a.push(o))}var a=[],s=!1;"complete,loaded,interactive".indexOf(n.readyState)>-1&&n.body?i():n.addEventListener("DOMContentLoaded",i,!1),t.exports=r}),d.version=d.utils.getVersion(),d.version_compare=d.utils.version_compare,each=d.each,d.nativeShare=d.client.nativeShare,d.type=a,d.canI=function(o,n,e){return d.version_compare(d.version,o)>=0?d.isFunction(n)&&n():d.isFunction(e)&&e(),d},i("common:bdbox/client/o2o",function(o,n,e,t){var i=o("common:bdbox/android/invokeApp"),r=o("common:bdbox/ios/invokeApp"),a=encodeURIComponent,s=o("common:bdbox/each"),c=t.isAndroid?function(o,n){t.isObject(o)&&(n=o,o=o.url,delete n.url);var e=["S.bdsb_light_start_url="+a(o)];if(t.isObject(n)){var r={color:"i.extra_actionbar_color_id",appid:"S.bdsb_wallet_appid"};s(n,function(o,n){"color"===n&&(o=4278190080|parseInt("0x"+o)),n=r[n]||n,e.push(n+"="+o)})}e=e.join(";"),i("Bdbox_android_utils","command",[JSON.stringify({intent:"intent:#Intent;"+e+";end","class":"com.baidu.searchbox.wallet.WalletServiceActivity",min_v:"16783629",mode:"0"})])}:function(o,n){t.isObject(o)&&(n=o,o=o.url,delete n.url);var e={openurl:a(o),minver:"5.3.0.0",isla:0,opentype:1,append:0,rbtnstyle:2};if(t.isObject(n)){var i={color:"barcolor"};s(n,function(o,n){n=i[n]||n,e[n]=o})}e.appid&&(e.isla=1),r("easybrowse",e)};e.exports=c}),d.o2o=d.client.o2o,"android"===d.os.name?f("card",{query:function(o,n){if(f.version_compare(f.version,"5.0")<0)return this;var e,t;f.isArray(o)?e=[JSON.stringify(o)]:(t=f.toArray(arguments),n=t.pop(),f.isFunction(n)?e=t:(e=f.toArray(arguments),n=null),e=[JSON.stringify(e)]);var i=f.android.invokeApp("Bdbox_android_card","mquery",e);return i=0===i.error&&i.result?JSON.parse(i.result):!1,f.isFunction(n)&&n(i),i},add:function(n,e){if(f.version_compare(f.version,"5.0")<0)return this;var t,i;f.isString(n)?t=[n]:f.isArray(n)?t=[JSON.stringify(n)]:(i=f.toArray(arguments),e=i.pop(),f.isFunction(e)?t=i:(t=f.toArray(arguments),e=null),t=[JSON.stringify(t)]);var r=null;if(f.version_compare(f.version,"5.5")>=0){var a="";f.isFunction(e)&&(a="__box_card_"+f.getId(),o[a]=function(o){var n=JSON.parse(o),t=!1;for(var i in n){t=n[i].st;break}e(t)}),r=f.android.invokeApp("Bdbox_android_card","madd",t.concat([a,0]))}else r=f.android.invokeApp("Bdbox_android_card","madd",t);return r}}):f("card",{query:function(o,n){if(f.version_compare(f.version,"5.0")<0)return this;var e,t;f.isArray(o)?e=[JSON.stringify(o)]:(t=f.toArray(arguments),n=t.pop(),f.isFunction(n)?e=t:(e=f.toArray(arguments),n=null),e=[JSON.stringify(e)]);var i=function(o){f.isFunction(n)&&n(JSON.parse(o)),i=null};f.ios.invokeApp("cardMquery",{params:encodeURIComponent(e)},i)},add:function(o,n){if(f.version_compare(f.version,"5.0")<0)return this;var e,t;f.isString(o)?e=[o]:f.isArray(o)?e=[JSON.stringify(o)]:(t=f.toArray(arguments),n=t.pop(),f.isFunction(n)?e=t:(e=f.toArray(arguments),n=null),e=[JSON.stringify(e)]);var i=function(o){var e=JSON.parse(o),t=!1;for(var r in e){t=e[r].st;break}f.isFunction(n)&&n(t),i=null};return f.ios.invokeApp("cardMadd",{params:encodeURIComponent(e),gohome:"0"},i),!0}}),i("common:bdbox/utils/jsonToQuery",function(o,n,e,t){e.exports=function(o){if(t.isString(o))return o;var n=[];for(var e in o)n.push(e+"="+o[e]);return n.join("&")}}),i("common:bdbox/io/loadJS",function(e,t,i,r){function a(e,t,i){var a,u,p,d=n.createElement("script");r.isString(e)?(a=e,r.isFunction(t)&&(i=t,t=null)):(a=e.url,t=e.data,i=e.success,u=e.error||r.emptyFn,p=e.timeout),r.isObject(t)&&(t=c(t)),t&&(a+=(-1===a.indexOf("?")?"?":"&")+t),a=a.replace(/[&?]{1,2}/,"?");var l;/=\?/.test(a)&&(l="_box_jsonp"+r.getId(),a=a.replace(/=\?/,"="+l));var f=s();p=p||2e4,d.type="text/javascript",d.src=a;var m,v=!0,h=function(){l&&delete o[l],m&&clearTimeout(m),d.onload=d.onreadystatechange=d.onerror=null,d=null},b=function(){!d||d.readyState&&!/loaded|complete/.test(d.readyState)||(h(),v&&r.isFunction(i)&&i.apply(null,r.toArray(arguments)),v=!1)},g=function(o){h(),v&&u(o),v=!1};l&&(o[l]=b),m=setTimeout(function(){h(),v&&u("timeout"),v=!1},p),d.onload=d.onreadystatechange=d.onerror=b,d.onerror=g,f.appendChild(d)}function s(){return n.head||n.getElementsByTagName("head")[0]||n.documentElement}var c=e("common:bdbox/utils/jsonToQuery");r.emptyFn,i.exports=a}),i("common:bdbox/utils/queryToJson",function(o,n,e){e.exports=function(o){try{o=o?decodeURIComponent(o):""}catch(n){o=""}var e=o.split("?"),t=e[1]?e[1]:e[0],i=t.split("&"),r={};return i.forEach(function(o){o=o.split("="),o[0].length>0&&(r[o[0]]=o[1]||"")}),r}}),i("common:bdbox/extend",function(o,n,e,t){function i(o,n,e){for(var t in n)e&&(r(n[t])||a(n[t]))?(r(n[t])&&!r(o[t])&&(o[t]={}),a(n[t])&&!a(o[t])&&(o[t]=[]),i(o[t],n[t],e)):c(n[t])||(o[t]=n[t])}var r=t.isPlainObject,a=t.isArray,s=t.isBoolean,c=t.isUndefined;e.exports=function(o){var n,e=t.emptyArr.slice.call(arguments,1);return s(o)&&(n=o,o=e.shift()),e.forEach(function(e){i(o,e,n)}),o}}),i("common:bdbox/utils/ready",function(o,e,t){function i(){a.forEach(function(o){o()}),a.length=0,s=!0}function r(o){"function"==typeof o&&(s?o():a.push(o))}var a=[],s=!1;"complete,loaded,interactive".indexOf(n.readyState)>-1&&n.body?i():n.addEventListener("DOMContentLoaded",i,!1),t.exports=r}),i("common:bdbox/utils/detect",function(n,e,t,i){function r(n){var e={name:"unknown",version:0};this===o||this.os||(this.os=e),n=n||navigator.userAgent;var t={Weibo:/weibo/i,Wechat:/micromessenger\//i,QQ:/QQ\//};for(var i in t)t.hasOwnProperty(i)&&(e["is"+i]=t[i].test(n));e.isUC=n.match(/UC/)||o.ucweb||o.ucbrowser;var r=n.match(/(Android);?\s+([\d.]+)?/);if(r)return e.android=!0,e.version=r[2],e.name="android",e;var a=n.match(/(iPad).*OS\s([\d_]+)/),s=n.match(/(iPod)(.*OS\s([\d_]+))?/),c=!a&&n.match(/(iPhone\sOS)\s([\d_]+)/);return c&&!s?(e.ios=e.iphone=!0,e.version=c[2].replace(/_/g,"."),e.name="ios",e):a?(e.ios=e.ipad=!0,e.name="ios",e.version=a[2].replace(/_/g,"."),e):s?(e.name="ios",e.ios=e.ipod=!0,e.version=s[3]?s[3].replace(/_/g,"."):null,e):e}r.apply(i),t.exports=r}),i("common:bdbox/schema",function(o,e,t,i){function r(o,e){if(!o)return void e(!0);if(e=e||i.emptyFn,!i.isBox&&i.isIOS&&c(s.version,"9.0")>=0)return void u(function(){a(o,e)});var t=Date.now(),r=n.createElement("IFRAME");r.src=o,r.style.position="absolute",r.style.left="-2000px",r.style.top="-1000px",r.style.width="1px",r.style.height="1px",r.style.webkitTransition="all 0.9s",r.style.transition="all 0.9s",n.body.appendChild(r);var p=function(){n.body.removeChild(r),e(Date.now()-t<1500?!0:!1)};r.addEventListener("webkitTransitionEnd",p,!1),r.addEventListener("transitionEnd",p,!1),setTimeout(function(){r.style.left="-1000px"},20)}function a(o,n){location.href=o,p&&clearTimeout(p),p=setTimeout(function(){n(!0)},3e3)}var s=o("common:bdbox/utils/detect")(),c=o("common:bdbox/utils/version_compare"),u=o("common:bdbox/utils/ready"),p=null;t.exports=r}),i("common:bdbox/monitor",function(n,e,t,i){var r=encodeURIComponent,a=function(o,n){o+=o.indexOf("?")<0?"?":"&",this.url=o,this.options=n};a.prototype.report=function(n){n=n||"";var e=new Image(1,1),t=[];if(i.isObject(n)){for(var a in n)t.push(a+"="+r(String(n[a])));n=t.join("&")}var s="_box_mt"+i.getId();o[s]=e,e.onload=e.onerror=e.onabort=function(){e.onload=e.onerror=e.onabort=null,o[s]=e=null};var c=this.url+n;return i.isFunction(this.options.customHandler)&&(c=this.options.customHandler(c)),e.src=c+"&_rnd="+Math.floor(2147483648*Math.random()),this},a.prototype.main=function(o,n){return o&&i.isFunction(this[o])&&this[o].apply(this,i.toArray(n||[])),this},t.exports=function(o,n){return new a(o,n)}}),i("common:bdbox/clone",function(o,n,e){var t=Object.prototype.toString,i=function(o,n,e){var t=0;for(var i in o)if(o.hasOwnProperty(i))if(e)n[i]=o[i];else if(n(i,o[i],t++))break},r=function(o){var n;switch(t.call(o)){case"[object Object]":n={},i(o,function(o,e){n[o]=r(e)});break;case"[object Array]":n=[],o.forEach(function(o){n.push(r(o))});break;default:n=o}return n};e.exports=r}),i("common:bdbox/monitor/pblog",function(o,n,e,t){var i=o("common:bdbox/monitor"),r=o("common:bdbox/extend"),a=o("common:bdbox/utils/queryToJson"),s=o("common:bdbox/utils/getVersion"),c=o("common:bdbox/clone"),u=a(location.search),p=navigator.userAgent,d="//m.baidu.com/tcbox",l={service:"bdbox",action:"pblog",ctv:2,cen:"uid_ua_ut",data:{appid:"1",dataid:"2",actiontype:"1",actionid:"2",actiondata:{ref:u.ref||"",gmv:u.vmgdb||"",source:u.from||u.ref||"",boxVersion:s(),boxPlatform:p.match(/(iPad|iPhone|iPod)/gim)?"ios":"android"}}},f=encodeURIComponent;u.uid&&u.osname&&["osname","ua","ut","from","cfrom","uid","pkgname"].forEach(function(o){u[o]&&(l[o]=u[o])});var m,v=i(d,{customHandler:function(o){var n=[];if(m)for(var e in m)if(m.hasOwnProperty(e)){var i=m[e];t.isPlainObject(i)&&(i=JSON.stringify(i)),n.push(e+"="+f(i))}return n.length&&(o+=n.join("&")),o}});v.init=function(o,n){t.isPlainObject(n)&&(l=r(l,n)),l.data.cateid=o},v.pv=function(o,n){m=c(l);var e=m.data;e.actionid="1";var t={};return t.url=o||location.href,n&&(t.u=n),e.actiondata=r(e.actiondata,t),v.report()},v.event=function(o,n,e){if(!o)throw"monitor.tc.event need a evtName";if(t.isPlainObject(n)&&!e){var i={evtName:o};for(var a in n)i[a]=n[a]}else var i={evtName:o,evtType:n||"",evtTag:e||""};m=c(l);var s=m.data;return s.actionid="2",s.actiondata=r(s.actiondata,i),v.report()},e.exports=function(){v.main.apply(v,arguments)}}),i("common:bdbox/moplus",function(o,n,e,t){var i=o("common:bdbox/utils/jsonToQuery"),r=o("common:bdbox/io/loadJS"),a=o("common:bdbox/utils/version_compare"),s=o("common:bdbox/monitor/pblog"),c=o("common:bdbox/schema"),u="com.baidu.searchbox",p="http://127.0.0.1:6259/",d="http://127.0.0.1:40310/",l="inapp_boxserver",f="https:"===location.protocol,m=500,v=null,h="__moplus_host__",b={isSendPv:!1,isHit:!1,parseUA:function(){var o,n,e=navigator.userAgent,t={uc:/UCBrowser\/(\S*) \S*/g,bd:/baidubrowser\/(\S*) \(Baidu/g,qq:/MQQBrowser\/(\S*) Mobile/g,chr:/Chrome\/(\S*) Mobile/g,qh:/360 Aphone Browser \((\S*)\)/g,sg:/SogouMobileBrowser\/(\S*)/g,mi:/MiuiBrowser\/(\S*)/g};for(var i in t){var r=t[i].exec(e);if(r){o=i,n=r[1];break}}return o=o?o:"other",n=n?n:"0",{t:o,v:n}},parseHost:function(){return g.curHost===d?1:0},sendEvt:function(o,n,e,t){this.isHit&&this.send(o,n,e,t)},send:function(o,n,e,t){var i=this.parseUA(),r=i.t,a=i.v,c=f?0:1,u=this.parseHost();s("event",[o,{evtType:n||"",brName:r,brVer:a,isHttp:c,isNew:u,source:e||"",intent:t||""}])},init:function(){this.isHit=Date.now()%100===1,s("init",[2])}},g=function(o,n,e){this.version="2.0",this.isHttps=f,this.curHost=e||"",this.newHost=d,this.oldHost=this.isHttps?d:p,this.MCMDF=n||l,this._infoFuncs=[],this._verFuncs=[],this.minVersion=o?o:0,this.pkgName=u,b.init()},y=function(o,n){try{sessionStorage.setItem(o,n)}catch(e){}},x=function(o){var n;try{n=sessionStorage.getItem(o)}catch(e){}return n};g.prototype={constructor:g,setMcmdf:function(o){return this.MCMDF=o,this},setHost:function(o){return this.curHost=o,y(h,o),this},getHost:function(){if(this.isHttps)return this.curHost=this.newHost,this.newHost;var o=x(h);return o?(this.curHost=o,this.curHost):void 0},api:function(o,n,e,r){if(!o)throw"Moplus.api need an action";t.isFunction(n)&&(r=e,e=n,n={});var a=o+(~o.indexOf("?")?"&":"?")+i(n);return~a.indexOf("mcmdf")||(a+="&mcmdf="+this.MCMDF),b.sendEvt("api","send:"+o,this.MCMDF,a),this.request(a,function(n){b.sendEvt("api",(t.isPlainObject(n)&&0==n.error?"success:":"fail:")+o,this.MCMDF,a),e(n)},r)},getInfo:function(o,n){if(v)return o(v);if(this._infoFuncs.push(o),!(this._infoFuncs.length>1)){var e=this,i=function(o,n){!n&&t.isPlainObject(o)&&(v=o);var i;for(n&&(o={error:33});i=e._infoFuncs.shift();)i(o)},a="getsearchboxinfo?mcmdf="+this.MCMDF;if(this.getHost()){var s={url:this.curHost+a+"&callback=?",success:i,error:function(){i(null,!0)},timeout:n};r(s)}else this.request(a,function(o){return 33===o.error?i(null,!0):void i(o)},n);return this}},getHVersion:function(o,n){this._verFuncs.push(o);var e=this;if(!(this._verFuncs.length>1)){var t=function(o){var n;for(o=e.parseInfo(o);n=e._verFuncs.shift();)n(o)};return this.getInfo(t,n),this}},parseInfo:function(o,n){o=o||v,n=n||this.minVersion;var e=o.package_infos;if(!e||0===e.length)return!1;var t=u,i={offic:{name:u,version:0},oem:{version:0}};return e.forEach(function(o){var e=o.version_name,r=o.package_name;a(e,n)>=0&&(r===t?1===a(e,i.offic.version)&&(i.offic={version:e,name:u}):1===a(e,i.oem.version)&&(i.oem={version:e,name:r}))}),0===i.oem.version&&0===i.offic.version?!1:0!==i.offic.version?i.offic:0!==i.oem.version?i.oem:void 0},schema:function(o,n){if(!o.intent)throw"schema intent is empty";o.mcmdf||(o.mcmdf=this.MCMDF);var e=function(){b.sendEvt("schema","success",o.source,o.intent),t.isFunction(n)&&n({error:0,from:"schema"})},i=function(){b.sendEvt("schema","fail",o.source,o.intent),t.isFunction(n)&&n({error:20,from:"schema"})},r=o.schema||"";if(o.intent&&!o.schema){var a=o.intent;-1==a.indexOf(u)&&(b.sendEvt("defaultPKGName","fail",o.source||"",o.intent),o.minver=o.minver?o.minver:"6.9.1")}r||(r="baiduboxapp://utils?action=sendIntent&params="+encodeURIComponent(JSON.stringify(o))+"&minver="+(o.minver?o.minver:"6.9")),c(r,function(o){o?i():e()})},sendIntent:function(o,n,e){var i={};if(o&&t.isString(o)){var r,a=this,s=!0;return t.isPlainObject(e)?(i=e,r=e.source||"",e.needlog?b.isHit=e.needlog:i.needlog=b.isHit?1:0,e=e.timeout):t.isBoolean(e)&&(s=e),i.intent=o,b.sendEvt("sendintent","send",r,o),this.api("sendintent",{intent:encodeURIComponent(o)},function(e){!e||e&&33===e.error||!t.isPlainObject(e)?(b.sendEvt("sendintent","fail",r,o),s?a.schema(i,n):(e=e||{},e.from="moplus",n(e))):(b.sendEvt("sendintent","success",r,o),n(e))},e)}return this},request:function(o,n,e){var i,a,s=this,c={timeout:e};t.isFunction(n)&&!~o.indexOf("callback=")&&(o+="&callback=?");var u=function(o){i="success",t.isFunction(n)&&n(o)},p=function(){t.isFunction(n)&&n({error:33})};if(s.getHost())c.url=s.curHost+o,c.success=u,c.error=p,r(c);else if(c.url=s.newHost+o,c.success=function(o){"success"!==i&&(a&&clearTimeout(a),s.setHost(s.newHost),u(o))},c.error=function(){s.isHttps?(i="error",p()):"error"===i&&p(),i="error"},r(c),!s.isHttps){var d={timeout:e,url:s.oldHost+o,error:c.error};d.success=function(o){"success"!==i&&("error"===i?(s.setHost(s.oldHost),u(o)):a=setTimeout(function(){s.setHost(s.oldHost),u(o)},m))},r(d)}return this}},e.exports=function(o,n){return new g(o,n)},e.exports.Moplus=g}),d.version_compare(d.version,"5.3.5")>=0){var h,b={image:"imageUrl",url:"linkUrl",order:"mediaType"},g="";o[g]=d.emptyFn,d.isAndroid?(h=function(o){if(o.id&&d.byId(o.id)){var n=o.eventType||"touchstart";d.byId(o.id).addEventListener(n,function(){e(o)},!0)}var e=function(n){n=s(n||o);var e=n.error,t=n.success;n.iconUrl&&n.imageUrl&&delete n.imageUrl,d.android.invokeApp("Bdbox_android_utils","callShare",[JSON.stringify(n),t||"console.log",e||"console.log"])};return e},f("share",h)):(h=function(o){if(o.id&&d.byId(o.id)){var n=o.eventType||"touchstart";d.byId(o.id).addEventListener(n,function(){e(o)},!0)}var e=function(n){n=s(n||o);var e=n.error,t=n.success;n.iconUrl&&!n.imageUrl&&(n.imageUrl=n.iconUrl),n=JSON.stringify(n),d.ios.invokeApp("callShare",{options:encodeURIComponent(n),errorcallback:e||"console.log",successcallback:t||"console.log"})};return e},f("share",h))}else{var y=[],x=function(){f._socShare&&f._socShare.init?y.forEach(function(o){f._socShare.init(o)}):setTimeout(x,3e3)};d.io.loadJS("//m.baidu.com/static/searchbox/openjs/share.js?v=1.2",x);var _={source:"client_id",id:"dom_id",image:"pic_url",success:"afterRender"},h=function(o){var n={content:"",client_id:"ZVEpDSsmZ0qxa1gmgDAh1Fje",theme:"native",dom_id:"share",animate:!0,pic_url:"",url:encodeURIComponent(location.href)};return d.isObject(o)&&d.each(o,function(o,e){if(e in _&&(e=_[e]),"order"===e&&d.isArray(o)){var t=[];o.forEach(function(o){"email"===o&&(o="mail"),t.push(o)})}n[e]=o}),delete n.success,delete n.error,delete n.afterRender,"all"===n.order?n.order=["qqdenglu","sinaweibo","renren","kaixin","mail","sms"]:d.isString(n.order)&&(n.order=n.order.split(",")),f._socShare&&f._socShare.init?f._socShare.init(n):y.push(n),function(){f._socShare.ui._shareBtnClickHandler()}};f("share",h)}if(i("common:bdbox/distribute",function(o,n,e,t){var i=o("common:bdbox/schema");o("common:bdbox/utils/detect");var r=o("common:bdbox/each"),a=o("common:bdbox/moplus"),s=t.emptyFn,c={qqDownloadUrl:"http://a.app.qq.com/o/simple.jsp?pkgname=com.baidu.searchbox",androidDownloadUrl:"",iosDownloadUrl:"",iosFailCallback:s,androidFailCallback:s,iosSchema:"",androidSchema:"",androidIntent:"",inBoxCallback:s},u=function(o){var n=this;o&&r(c,function(n,e){o[e]=o[e]||n});var e=this.url=o.url;e&&""!==e?(this.androidIntent="intent://"+e.replace(/^http[s]?:\/\//,"")+"#Intent;scheme=http;action=com.baidu.searchbox.action.VIEW;category=android.intent.category.DEFAULT;end",this.iosSchema="baiduboxapp://easybrowse?openurl="+encodeURIComponent(e)+"&opentype=0&isla=0&append=0&minver=5.3.0.0"):["androidIntent","iosSchema","androidSchema"].forEach(function(e){n[e]=o[e]}),this.options=o,this.fail=function(){if(console.log(t.os.name+" fail"),t.isFunction(o[t.os.name+"FailCallback"])){var n=o[t.os.name+"FailCallback"]();if(t.isBoolean(n)&&!n)return}var e=o[t.os.name+"DownloadUrl"];e&&""!==e&&(location.href=o[t.os.name+"DownloadUrl"])},this.success=function(){return console.log(t.os.name+" success"),t.isFunction(o[t.os.name+"SuccessCallback"])?o[t.os.name+"SuccessCallback"]():void 0}};u.prototype.wechat=function(){var o=this.options;if(t.isFunction(o.wechatCallback)){var n=o.wechatCallback();if(t.isBoolean(n)&&!n)return}o.qqDownloadUrl&&""!==o.qqDownloadUrl&&(location.href=o.qqDownloadUrl)},u.prototype.run=function(){var o=this,n=(o.url,o.options);return t.os.isWechat?o.wechat():t.isBox&&t.isFunction(n.inBoxCallback)?n.inBoxCallback():void this.invoke()},u.prototype.invoke=function(){var o=this;if(t.os.android){var n=a();n.getHVersion(function(e){e?n.sendIntent(o.androidIntent,function(n){0==n.error?o.success():o.fail()},1e3):o.androidSchema?i(o.androidSchema,function(n){n?o.fail():o.success()}):o.fail()})}else i(o.iosSchema,function(n){n?o.fail():o.success()})},e.exports=function(o){return new u(o)}}),each(d,function(o,n){f[n]=o}),o.Box&&o.Box.$)for(var S in f)o.Box[S]=o.Box[S]||f[S];else o.Box=f}(window,document),define("builtins/video/player",["require","zepto"],function(o){function n(o){this.params=e.extend(!0,{container:null,height:null,width:null,src:null,type:null,poster:null,autoplay:null,controls:null,loop:null,muted:null,ios:{playMode:!1},android:{playMode:!1},adInfo:[],playInfo:[]},o),this.box={normal:e('<div class="mip-video-box"></div>'),hide:e('<div class="mip-video-box-ios"></div>')},this.adIdx=0,this.lastTime=0,this.eventNS=".mipvideo",this.init(),this.bindEvents()}var e=o("zepto"),t=function(o){var n=this;n.options=e.extend({title:"",content:"",fullView:!1,duration:400,customClassName:"",onOpen:function(){},onClose:function(){}},o),n._init()};t.prototype={constructor:t,version:"0.0.1",_init:function(){var o=this;o._preparePopupWrapper(),o._stopScroll(),o.popup()},_preparePopupWrapper:function(){var o=this,n=e(".mip-video-popup-wrapper");n.length?(o.$popupFrame=n,o.$popupFrame.empty()):(o.$popupFrame=e('<div class="mip-video-popup-wrapper"></div>'),e(document.body).append(o.$popupFrame))},_stopScroll:function(){var o=this;o.$popupFrame.on("touchmove",function(o){o.preventDefault()})},_bindEvent:function(){var o=this;o.$popupFrame.on("click",".mip-video-popup-mask,.mip-video-popup-remove",function(){o.closePopup()})},_randerContent:function(){var o=this;if(o.$popupMask=e('<div class="mip-video-popup-mask"></div>'),o.$popupModal=e('<div class="mip-video-popup-modal"></div>'),o.$popupContent=e('<div class="mip-video-popup-content"></div>'),o.$popupHead=e('<div class="mip-video-popup-head"></div>'),o.options.title){var n=e('<div class="mip-video-popup-title"></div>');n.append(o.options.title),o.$popupHead.append(n)}var t=e('<div class="mip-video-popup-remove">X</div>');o.$popupHead.append(t),o.$popupContent.append(o.options.content),o.$popupModal.append(o.$popupHead).append(o.$popupContent).addClass(o.options.customClassName),o.$popupFrame.append(o.$popupModal).append(o.$popupMask)},popup:function(){var o=this,n=e(window).height();o._randerContent(),o._bindEvent(),o.$popupMask.show().animate({opacity:1},"fast","linear"),o.$popupModal.show();var t=o.$popupModal.height();(o.options.fullView||t>n)&&o.$popupModal.height("100%"),o.$popupModal.animate({"-webkit-transform":"translate3d(0, 0, 0)",transform:"translate3d(0, 0, 0)"},o.options.duration,"linear",function(){e(this).css({"-webkit-transform":"none",transform:"none"}),o.options.onOpen()})},closePopup:function(){var o=this;o.$popupModal.animate({"-webkit-transform":"translate3d(0, 100%, 0)",transform:"translate3d(0, 100%, 0)"},o.options.duration,"linear",function(){e(this).css({"-webkit-transform":"none",transform:"none"}).hide(),o.options.onClose(),o._destroy()}),o.$popupMask.animate({opacity:0},"fast","linear",function(){e(this).hide()})},_destroy:function(){var o=this;o.$popupFrame.off("click",".mip-video-popup-mask,.mip-video-popup-remove"),o.$popupFrame.empty()}};var i=t;return n.prototype={constructor:n,tplSource:["<% for (var i = 0, len = data.length; i < len; i++) { var item = data[i]; %>",'<source <%=(item.type ? "type=" + item.type : "")%> src="<%=item.src%>"></source>',"<% } %>"].join(""),tmpl:function(){var o={},n=function e(n,t){var i=/\W/.test(n)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+n.replace(/[\r\t\n]/g," ").split("<%").join("	").replace(/((^|%>)[^\t]*)â€™/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("	").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):o[n]=o[n]||e(document.getElementById(n).innerHTML);return t?i(t):i};return n}(),init:function(){var o=this;o.$video=e('<video autoplay="autoplay"></video>'),o.video=o.$video[0],o.video.className="mip-video-player",o.isWorking=!1},initParams:function(){var o=this;o.lastTime=0},render:function(o){var n=this;this.options=e.extend({},n.params,o),n.setAttrs(),n.loadSource(),n.appendVideo(),n.play(),n.isWorking=!0},setAttrs:function(){var o=this,n=o.options;o.setAttr("width",n.width),o.setAttr("height",n.height),o.setAttr("poster",n.poster),o.setAttr("autoplay",n.autoplay),o.setAttr("controls",n.controls),o.setAttr("loop",n.loop),o.setAttr("muted",n.muted)},setAttr:function(o,n){var e=this,t=e.$video;n||0===n||""===n?t.attr(o,n):t.removeAttr(o)},appendVideo:function(){var o=this,n=o.$video,t=o.options,i=e(t.container);if(i.length){if(o.isIos()&&t.ios&&"hide"===t.ios.playMode){var r=o.box.hide.html(n);return void i.append(r)}return!o.isIos()&&t.android&&"fullscreen"===t.android.playMode?void o.fullscreenForAndriod():void i.append(this.box.normal.html(n))}},play:function(){var o=this,n=/(iphone.+mqqbrowser)|(android.*(baidubrowser)|(baiduboxapp))/i;navigator.userAgent.match(n)?setTimeout(function(){o.video.play()},30):o.video.play()},load:function(){this.video.load()},loadSource:function(){{var o=this,n=o.options;o.video}o.initParams(),o.removeEventsForAD(),o.hasAd(n)?o.playForAD(n):o.playForNormal(n),o.load()},playForNormal:function(){{var o=this,n=o.options,e=n.playInfo;o.video}e&&e.length||(e=[],e[0]={type:n.type,src:n.src}),o.appendSource(e)},playForAD:function(){{var o=this,n=o.options,e=n.adInfo;o.video}o.hasAd(n)&&(o.appendSource(e[o.adIdx]),o.adIdx++,o.eventsForAD())},eventsForAD:function(){var o=this,n=o.eventNS+"forad",e=o.video;o.removeEventsForAD(),o.$video.on("timeupdate"+n,function(){var n=Math.ceil(e.currentTime),t=o.getVideoTime();return n-o.lastTime>2?(e.currentTime=o.lastTime,o.lastTime=o.lastTime,void o.play()):(o.lastTime=n,void(t&&n>=t&&(o.loadSource(),o.play())))})},removeEventsForAD:function(){var o=this,n=o.eventNS+"forad";o.$video.off("timeupdate"+n)},hasAd:function(){var o=this,n=o.options,e=n.adInfo;return!e||!e.length||o.adIdx>=e.length?!1:!0},appendSource:function(o){var n=this,e=n.$video,t=this.tmpl(this.tplSource,{data:o});t&&e.html(t)},isIos:function(){return/iPhone|iPad|iPod/i.test(window.navigator.userAgent)},bindEvents:function(){var o=this;o.$video.on("canplay",function(){o.video.play()})},fullscreenForAndriod:function(){var o=this,n=o.$video,t=o.options,r=o.eventNS+"fullscreen",a=new i({title:t.title||"",content:"",fullView:!0,customClassName:"mip-video-player-popup",onOpen:function(){a.$popupContent.html(n),o.setVideoCenterForFullscreen()},onClose:function(){e(window).off("orientationchange"+r),o.initStyle()}}),s=e(".mip-video-player-popup .mip-video-popup-remove");s.length&&s.off("click"+r).on("click"+r,function(){a.$popupContent.length&&a.$popupContent.html("")})},initStyle:function(){var o=this,n=o.$video;n.removeAttr("style")},setVideoCenterForFullscreen:function(){var o=this,n=o.eventNS+"fullscreen",t=0,i=e(".mip-video-player-popup .mip-video-popup-remove");i.length&&(t=i.height()+i.offset().top),e(window).off("orientationchange"+n+" resize"+n).on("orientationchange"+n+" resize"+n,function(){o.calculateVideo({freesize:t})}),o.calculateVideo({freesize:t})},calculateVideo:function(o){var n=this,t=n.$video,o=o||{};n.initStyle(),setTimeout(function(){var n=e(window).height(),i=e(window).width(),r=o.freesize||0,a=t.height();i>=n&&(a=n-2*r),t.css({height:a+"px","margin-top":-a/2+"px",visibility:"visible"})},10)},pause:function(){this.video.pause()},remove:function(){this.$video.parent().remove(),this.isWorking=!1
},getVideoTime:function(){return Math.ceil(this.video.duration)},on:function(o,n){this.$video.on(o,n)},off:function(o,n){this.$video.off(o,n)},trigger:function(o){this.$video.trigger(o)}},n});