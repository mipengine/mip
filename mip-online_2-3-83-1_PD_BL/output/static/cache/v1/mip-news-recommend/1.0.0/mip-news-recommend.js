define("mip-news-recommend/mip-news-recommend",["require","zepto","viewer","customElement"],function(t){function e(){var t=a(this.element),e=t.attr("src")||"//headline.baidu.com/doc/recommended";s.init({$container:t,url:e})}function i(t){var e=new RegExp("(^|&)"+t+"=([^&]*)(&|$)","i"),i=window.location.search.substr(1).match(e);if(null!=i)return i[2];else return null}function n(){var t=location.href;if(/mipcache\./g.test(t))t=t.replace(/^http(s?)\:\/\/mipcache.bdstatic.com\/c\/(s?)/g,function(t,e,i){return"s"===i?"https://":"http://"});return t=t.replace(/\#.*$/g,"")}function o(t){return"//mib.bdstatic.com/doc/detail/"+encodeURIComponent(t)+"/0/#from=sub"}function r(t){var e=1e3*t;if(new Date-e<6e4)return"刚刚";var i=Math.floor((new Date-e)/6e4);if(i<60)return i+"分钟前";var n=Math.floor(i/60);if(n<24)return n+"小时前";var o=new Date(e),r=o.getMonth()+1;r=r<10?"0"+r:r;var s=o.getDate()<10?"0"+o.getDate():o.getDate();return r+"-"+s}var s,a=t("zepto"),l=t("viewer"),c=t("customElement").create();return c.prototype.createdCallback=e,s={url:null,ajaxData:null,isIframe:window.parent!==window,init:function(t){this.$container=t.$container,this.url=t.url,this.ajaxData={url_key:n(),from:i("from")||"search",app_from:i("app_from")||"midway",qid:window.B?window.B.qid:0,is_mip:!0},this.request(),this.delegate()},request:function(){var t=this;a.ajax({url:this.url,dataType:"jsonp",jsonp:"cb",data:this.ajaxData,success:function(e){if(0!==e.status)t.error(e.data);else t.display(e.data)}})},delegate:function(){var t=this.isIframe;if(t)this.$container.on("click",".mip-news-recommend-href",function(t){t.preventDefault();var e=a(this);l.sendMessage("loadiframe",{url:e.data("url"),title:e.find(".mip-news-recommend-provider").text(),click:e.data("click")})}),this.$container.on("click",".mip-news-recommend-hot-href",function(t){t.preventDefault();var e=a(this);l.sendMessage("urljump",{url:e.data("url"),click:e.data("click")})})},handleData:function(t,e,i){var n={action:i,order:e,href:t.url};return JSON.stringify(n)},display:function(t){var e=this,i=this.isIframe,n="",s="";a.each(t.recommend,function(t,s){var a=e.handleData(s,t,"recommend"),l=i?"javascript:void(0);":o(s.url);n+=['<div class="mip-news-recommend-item">','<a class="mip-news-recommend-href" href="'+l+'" data-url="'+s.url+"\" data-click='"+a+"'>",'<div class="mip-news-recommend-title">'+s.title+"</div>",'<div class="mip-news-recommend-info">',"<span>"+r(s.time)+"</span>",'<span class="mip-news-recommend-provider">'+s.provider+"</span>","</div>","</a>","</div>"].join("")}),a.each(t.hot_card,function(t,n){var o=e.handleData(n,t,"hotpoint"),r=i?"javascript:void(0);":n.url;if(t%2===0)s+='<div class="mip-news-recommend-row">';if(s+=['<div class="mip-news-recommend-hot-item">','<a class="mip-news-recommend-hot-href" href="'+r+'" data-url="'+n.url+"\" data-click='"+o+"'>",n.query,"</a>","</div>"].join(""),t%2===1)s+="</div>"});var l=['<div class="mip-news-recommend-list">',"<h5>相关推荐</h5>","<div>",n,"</div>","</div>",'<div class="mip-news-recommend-hotpoints">',"<h5>新闻热点</h5>","<div>",s,"</div>","</div>"].join("");this.$container.append(l)},error:function(){}},c}),define("mip-news-recommend",["mip-news-recommend/mip-news-recommend"],function(t){return t}),function(){function t(t,e){t.registerMipElement("mip-news-recommend",e,".mip-news-recommend-list,.mip-news-recommend-hotpoints{padding:12px 17px;background-color:#fff}.mip-news-recommend-list h5,.mip-news-recommend-hotpoints h5{color:#999;font-size:16px;font-weight:normal}.mip-news-recommend-hotpoints{margin-top:8px}.mip-news-recommend-item{padding:14px 0;overflow:hidden;border-top:#eee 1px solid}.mip-news-recommend-item:first-child{border-top-width:0}.mip-news-recommend-title{font-size:16px;margin-bottom:9px;display:-webkit-box;-webkit-line-clamp:1;-webkit-box-orient:vertical;overflow:hidden}.mip-news-recommend-info{font-size:13px;color:#999}.mip-news-recommend-info span{margin-right:4px}.mip-news-recommend-row{margin-top:8px;width:auto;display:-webkit-box;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-box-pack:justify;-webkit-box-align:stretch;-webkit-box-lines:single;display:-webkit-flex;-webkit-flex-direction:row;-webkit-justify-content:space-between;-webkit-align-items:strecth;-webkit-align-content:flex-start;-webkit-flex-wrap:nowrap}.mip-news-recommend-row:first-child{margin-top:12px}.mip-news-recommend-hot-item{margin-right:5px;width:50%;-webkit-box-flex:6;-webkit-flex:6 6 auto}.mip-news-recommend-hot-item a{display:block;color:#333;overflow:hidden;font-size:14px;line-height:39px;text-align:center;white-space:nowrap;text-overflow:ellipsis;background-color:#f5f5f5}")}if(window.MIP)require(["mip-news-recommend"],function(e){t(window.MIP,e)});else require(["mip","mip-news-recommend"],t)}();